- μ”μ•½
    
    ## **π“ μ–΄λ…Έν…μ΄μ…(annotation)**
    
    - μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν•  λ•λ” @Annotation(parameters) κµ¬λ¬Έμ„ μ‚¬μ©ν•λ‹¤.
    - μ½”ν‹€λ¦°μ—μ„λ” **νμΌ, μ‹(expression)** λ“± λ„“μ€ λ²”μ„μ **νƒ€κΉƒ**μ— μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΌ μ μλ‹¤.
    - μ–΄λ…Έν…μ΄μ…μ μΈμλ΅λ” λ‹¤μμ„ μ‚¬μ©ν•  μ μλ‹¤:
        - κΈ°λ³Έ νƒ€μ… κ°’ (Int, Boolean λ“±)
        - λ¬Έμμ—΄
        - enum μƒμ
        - ν΄λμ¤ μ°Έμ΅° (::class)
        - λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ… μΈμ¤ν„΄μ¤
        - λ°°μ—΄
    
    ---
    
    ### **π― μ–΄λ…Έν…μ΄μ… μ‚¬μ© μ„μΉ μ§€μ •:**
    
    ### **@target**
    
    - ν•λ‚μ μ½”ν‹€λ¦° μ„ μ–Έμ΄ μ—¬λ¬ JVM λ°”μ΄νΈμ½”λ“ μ”μ†λ¥Ό λ§λ“¤μ–΄λ‚Ό μ μκΈ° λ•λ¬Έμ—,
        
        @targetμ„ μ‚¬μ©ν•μ—¬ μ •ν™•ν μ–΄λ–¤ **νƒ€κΉƒ μ”μ†(field, method λ“±)**μ— μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΌμ§€ μ§€μ •ν•  μ μλ‹¤.
        
    
    ```
    @get:JvmName("getCustomName")
    val name: String = "Kotlin"
    ```
    
    ---
    
    ### **β¨ μ–΄λ…Έν…μ΄μ… ν΄λμ¤ μ •μ**
    
    - annotation class ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•΄ μ •μν•λ‹¤.
    - λ¨λ“  νλΌλ―Έν„°λ” **val ν”„λ΅νΌν‹°λ΅ μ£Ό μƒμ„±μμ— μ„ μ–Έ**ν•΄μ•Ό ν•λ©°, **λ³Έλ¬Έμ€ μ—†μ–΄μ•Ό ν•λ‹¤.**
    
    ```
    annotation class JsonName(val name: String)
    ```
    
    ---
    
    ### **π”§ λ©”νƒ€ μ–΄λ…Έν…μ΄μ…**
    
    - μ–΄λ…Έν…μ΄μ…μ— λ¶™λ” μ–΄λ…Έν…μ΄μ….
    - μ:
        - @Target β†’ μ μ© κ°€λ¥ν• μ„μΉ μ§€μ • (μ: ν΄λμ¤, ν•¨μ, ν”„λ΅νΌν‹° λ“±)
        - @Retention β†’ μ–΄λ…Έν…μ΄μ…μ μ μ§€ λ²”μ„ (SOURCE, BINARY, RUNTIME)
        - @Repeatable β†’ μ¤‘λ³µ μ μ© ν—μ© μ—¬λ¶€
    
    ---
    
    ## **π” λ¦¬ν”λ ‰μ…(Reflection)**
    
    - **λ¦¬ν”λ ‰μ… API**λ¥Ό μ‚¬μ©ν•λ©΄ μ‹¤ν–‰ μ‹μ μ— **ν΄λμ¤, ν•¨μ, ν”„λ΅νΌν‹°** λ“±μ„ μ—΄κ±°ν•κ±°λ‚ νΈμ¶ν•  μ μλ‹¤.
    - μ£Όμ” νƒ€μ…:
        - KClass: ν΄λμ¤ ν‘ν„
        - KFunction: ν•¨μ ν‘ν„
        - KProperty: ν”„λ΅νΌν‹° ν‘ν„
        - μ΄λ“¤μ€ λ¨λ‘ KCallableμ„ ν™•μ¥ν•λ‹¤ β†’ call, callBy λ©”μ„λ“ μ κ³µ
    
    ---
    
    ### **π”‘ ν΄λμ¤ μ°Έμ΅°μ™€ ν•¨μ/ν”„λ΅νΌν‹° μ°Έμ΅°**
    
    - ν΄λμ¤μ KClass μΈμ¤ν„΄μ¤:
        
        MyClass::class
        
    - κ°μ²΄ μΈμ¤ν„΄μ¤μ ν΄λμ¤ μ°Έμ΅°:
        
        myObject::class
        
    
    ---
    
    ### **β™οΈ ν•¨μ νΈμ¶**
    
    - KFunction0, KFunction1 λ“±μ€ νλΌλ―Έν„° μμ— λ”°λΌ ν•¨μ νƒ€μ…μ„ ν‘ν„ν•λ‹¤.
    - invoke()λ΅ νΈμ¶ν•κ±°λ‚,
        
        call() / callBy()λ΅ νλΌλ―Έν„°λ¥Ό λ„£μ–΄ μ‹¤ν–‰ κ°€λ¥ν•λ‹¤.
        
    - callBy()λ” **λ””ν΄νΈ νλΌλ―Έν„°**λ¥Ό μλ™μΌλ΅ μ‚¬μ©ν•΄ νΈμ¶ κ°€λ¥.
    
    ---
    
    ### **π·οΈ ν”„λ΅νΌν‹° μ ‘κ·Ό**
    
    - KProperty0, KProperty1 λ“±μ€ ν”„λ΅νΌν‹°λ¥Ό ν‘ν„ν•λ‹¤.
    - .get()μΌλ΅ κ°’ μ½κΈ°, .set()μΌλ΅ κ°’ μ“°κΈ° (KMutableProperty κ³„μ—΄μ—μ„ κ°€λ¥)
    
    ---
    
    ### **π“ νƒ€μ… μ •λ³΄ κ°€μ Έμ¤κΈ°**
    
    - typeOf<T>() ν•¨μλ¥Ό μ‚¬μ©ν•λ©΄ μ‹¤ν–‰ μ‹μ μ KTypeμ„ μ–»μ„ μ μλ‹¤.
        - λ‹¨, μ‚¬μ©ν•λ ¤λ©΄ ν•¨μμ— reifiedκ°€ λ¶™μ€ μΈλΌμΈ ν•¨μμ—¬μ•Ό ν•λ‹¤.
- μ–΄λ…Έν…μ΄μ…μ€ μ»΄νμΌ νƒ€μ„μ— μ»΄νμΌλ¬μ™€ ν”„λ μ„μ›ν¬(λΌμ΄λΈλ¬λ¦¬) λ“±μ— νΉμ • λ‰μ•™μ¤λ‚, μλ―Έ, λλ” μ μ•½μ„ λ¶€μ—¬ν•λ‹¤.
- λ¦¬ν”λ ‰μ…μ€ λ°νƒ€μ„μ— ν΄λμ¤ - μΈμ¤ν„΄μ¤μ— λ€ν• μ μ–΄ μλ‹¨μΌλ΅ μ‚¬μ©ν•  μ μλ‹¤.
- λ¬Έμ  1
    
    μ•„λ λ‘ ν΄λμ¤μ ν•¨μ κ°κ°μ„ reflectionμ„ μ΄μ©ν•μ—¬ νΈμ¶ν•΄λ³΄μ.
    
    `Person`μ κ²½μ°, μ„λ΅ λ‹¤λ¥Έ ν”„λ΅νΌν‹° nameμ„ κ°–λ” λ‘ μΈμ¤ν„΄μ¤λ¥Ό μ΄μ©ν•΄ νΈμ¶ν•΄λ³΄μ.
    
    ```kotlin
    class HelloMachine {
        fun sayHello(name: String): String = "Hello, $name!"
    }
    
    class Person(val name: String) {
        fun introduce() = println("Hello, I'm $name!")
    }
    ```
    
    ---
    
    - λ‹µ
        
        ```kotlin
        fun main() {
            val instance = HelloMachine()
            val clazz = instance::class
            val hello = clazz.functions.find { it.name == "sayHello" }?.also { println("$it <- exists.") }
            println(hello?.call(instance, "μ‘¤μ•”μ "))
        
            val ljm = Person("μ΄μ¬λ…")
            val kms = Person("κΉ€λ¬Έμ")
            val personClass = ljm::class
            personClass.functions.find { it.name == "introduce" }?.let {
                it.call(ljm)
                it.call(kms)
            }
        }
        ```
        
- λ¬Έμ  2
    
    λ‹¤μ μ¤‘ μ½”ν‹€λ¦°μ μ–΄λ…Έν…μ΄μ…(annotation) μ— λ€ν• μ„¤λ…μΌλ΅ ν‹€λ¦° κ²ƒμ€?
    
    **1.**  μ–΄λ…Έν…μ΄μ…μ μ μ§€ λ²”μ„(`Retention`)λ” `SOURCE`, `BINARY`, `RUNTIME` μ¤‘ μ„ νƒν•  μ μλ‹¤.
    
    **2.** μ–΄λ…Έν…μ΄μ…μ€ μ„ μ–Έμ— μλ―Έλ¥Ό λ¶€μ—¬ν•κ³ , μ»΄νμΌλ¬λ‚ ν”„λ μ„μ›ν¬κ°€ μ΄λ¥Ό ν•΄μ„ν•μ—¬ κΈ°λ¥μ„ ν™•μ¥ν•  μ μλ‹¤.
    
    **3.**`@Retention(BINARY)`λ΅ μ„ μ–Έλ μ–΄λ…Έν…μ΄μ…μ€ λ°”μ΄νΈμ½”λ“μ— ν¬ν•¨λμ§€λ§, μ‹¤ν–‰ μ‹μ μ— λ¦¬ν”λ ‰μ…μΌλ΅ μ ‘κ·Όν•  μ μλ‹¤.
    
    **4.** λ¦¬ν”λ ‰μ…μΌλ΅ μ–΄λ…Έν…μ΄μ… μ •λ³΄λ¥Ό μ΅°νν•λ ¤λ©΄ `Retention`μ΄ `RUNTIME`μ΄μ–΄μ•Ό ν•λ‹¤.
    
    **5.** μ–΄λ…Έν…μ΄μ…μ€ ν΄λμ¤, ν•¨μ, ν”„λ΅νΌν‹°λΏ μ•„λ‹λΌ μ‹(expression), νμΌ μμ¤€μ—λ„ μ μ©ν•  μ μλ‹¤.
    
    ---
    
    - λ‹µ
        
        ### **1. β…**
        
        - μ½”ν‹€λ¦° μ–΄λ…Έν…μ΄μ…μ `Retention`μ€ **`SOURCE`, `BINARY`, `RUNTIME`** μ„Έ κ°€μ§€ μ¤‘ μ„ νƒ κ°€λ¥ν•¨
        
        ---
        
        ### **2. β…**
        
        - μ–΄λ…Έν…μ΄μ…μ€ μ»΄νμΌλ¬ ν”λ¬κ·ΈμΈ, kapt, ν”„λ μ„μ›ν¬(DI, μ§λ ¬ν™” λ“±)μ—μ„ μλ―Έλ¥Ό ν•΄μ„ν•λ” **λ©”νƒ€ μ •λ³΄**λ΅ λ„λ¦¬ μ‚¬μ©λ¨
        
        ---
        
        ### **3. β**
        
        - μ–΄λ…Έν…μ΄μ…μ΄ **ν•­μƒ λ°νƒ€μ„μ— μ΅΄μ¬ν•λ” κ²ƒμ€ μ•„λ‹**
        - `@Retention(SOURCE)`λ΅ μ„ μ–Έλ μ–΄λ…Έν…μ΄μ…μ€ **μ»΄νμΌ νƒ€μ„μ—λ§ μ΅΄μ¬**ν•κ³ , **λ°”μ΄νΈμ½”λ“μ—μ΅°μ°¨ ν¬ν•¨λμ§€ μ•μ**
        - `@Retention(BINARY)`λ” λ°”μ΄νΈμ½”λ“μ—λ” λ‚¨μ§€λ§, **λ¦¬ν”λ ‰μ…μΌλ΅λ” μ ‘κ·Ό λ¶κ°€**
        - μ¤μ§ `@Retention(RUNTIME)`μΌ λ•λ§ **λ¦¬ν”λ ‰μ…μΌλ΅ μ ‘κ·Ό κ°€λ¥**
        
        ---
        
        ### **4. β…**
        
        - `@Retention(RUNTIME)`μΌλ΅ μ„ μ–Έλ μ–΄λ…Έν…μ΄μ…λ§ `clazz.annotations` κ°™μ€ **λ¦¬ν”λ ‰μ… APIλ΅ μ΅°ν**ν•  μ μμ
        
        ---
        
        ### **5. β…**
        
        - μ½”ν‹€λ¦°μ€ `@file:`, `@get:`, `@set:`, `@receiver:` λ“± **νΉμ • νƒ€κΉƒ μ§€μ • μ–΄λ…Έν…μ΄μ… λ¬Έλ²•**μ„ μ κ³µν•μ—¬ νμΌ, μ‹, μƒμ„±μ λ“± λ„“μ€ λ²”μ„μ— μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν•  μ μμ
        
- λ¬Έμ  3
    
    **λ‹¤μ μ¤‘ μ½”ν‹€λ¦° λ¦¬ν”λ ‰μ… APIμ— λ€ν• μ„¤λ…μΌλ΅ ν‹€λ¦° κ²ƒμ€?**
    
    **A.** `KClass`λ” ν΄λμ¤μ νƒ€μ… λ©”νƒ€μ •λ³΄λ¥Ό λ‹΄λ” νƒ€μ…μ΄λ©°, `MyClass::class` λ¬Έλ²•μΌλ΅ μ–»μ„ μ μλ‹¤.
    
    **B.** `KFunction.call()`μ„ ν†µν•΄ private ν•¨μλ„ νΈμ¶ν•  μ μλ‹¤.
    
    **C.** `KProperty`λ” ν”„λ΅νΌν‹°λ¥Ό ν‘ν„ν•λ©°, `.get()`μΌλ΅ κ°’μ„ κ°€μ Έμ¬ μ μλ‹¤.
    
    **D.** `KFunction.callBy()`λ¥Ό μ‚¬μ©ν•λ©΄ λ””ν΄νΈ νλΌλ―Έν„°κ°€ μλ” ν•¨μλ¥Ό μΌλ¶€ μΈμλ§μΌλ΅ νΈμ¶ν•  μ μλ‹¤.
    
    **E.** `typeOf<T>()`λ¥Ό μ‚¬μ©ν•λ©΄ μ‹¤ν–‰ μ‹μ μ `KType` μ •λ³΄λ¥Ό μ–»μ„ μ μλ‹¤.
    
    - λ‹µ
        
        ### **1. β…**
        
        - KClassλ” ν΄λμ¤μ λ©”νƒ€ μ •λ³΄λ¥Ό ν‘ν„ν•λ” νƒ€μ…μ΄λ©°, ::class ν‚¤μ›λ“λ¥Ό ν†µν•΄ μ–»λ”λ‹¤.
            
            μ: MyClass::class
            
        - μ΄λ” java.lang.Classκ°€ μ•„λ‹λΌ μ½”ν‹€λ¦° μ „μ© νƒ€μ…μ΄λ©°, .simpleName, .members λ“±μ„ ν†µν•΄ λ‹¤μ–‘ν• μ •λ³΄λ¥Ό μ΅°νν•  μ μλ‹¤.
        
        ---
        
        ### **2. β**
        
        - **`KFunction.call()`μ€ private ν•¨μμ—λ” μ ‘κ·Όν•  μ μ—†λ‹¤.**
        - μ»΄νμΌλ¬λ” μ ‘κ·Ό μ ν•μ„ μ§€ν‚¤λ©°, **`IllegalCallableAccessException` μμ™Έ**κ°€ λ°μƒν•λ‹¤.
        - `Java Reflection`μ `setAccessible(true)`λ¥Ό μ“°μ§€ μ•λ” μ΄μƒ private λ©¤λ²„λ” νΈμ¶ν•  μ μ—†λ‹¤.
        
        ---
        
        ### **3. β…**
        
        - `KProperty`λ” μ½”ν‹€λ¦°μ ν”„λ΅νΌν‹°λ¥Ό ν‘ν„ν•λ©°, `.get()` λ©”μ„λ“λ΅ κ°’μ„ μ΅°νν•  μ μλ‹¤.
        - μ: `val nameProp = MyClass::name; nameProp.get(instance)`
        
        ---
        
        ### **4. β…**
        
        - `KFunction.callBy()`λ” νλΌλ―Έν„°μ— **λ””ν΄νΈ κ°’μ΄ μ •μλμ–΄ μμ„ λ•**, μ „λ‹¬ν•μ§€ μ•μ€ μΈμλ” μλ™μΌλ΅ λ””ν΄νΈ κ°’μ΄ μ‚¬μ©λλ‹¤.
        - **`Map<KParameter, Any?>`** ν•νƒλ΅ μΈμλ¥Ό λ„κΈ°λ©°, λ¶€λ¶„μ  νΈμ¶μ΄ κ°€λ¥ν•λ‹¤.
        
        ---
        
        ### **5. β…**
        
        - `typeOf<T>()`λ” `inline + reified` ν‚¤μ›λ“μ™€ ν•¨κ» μ‚¬μ©λλ©°, **μ‹¤ν–‰ μ‹μ μ νƒ€μ… ν‘ν„`(KType)`** μ„ λ°ν™ν•λ‹¤.
        - μ΄ κΈ°λ¥μ„ ν†µν•΄ λ³µμ΅ν• μ λ„¤λ¦­ νƒ€μ…λ„ λ°νƒ€μ„μ— νƒ€μ… μ •λ³΄λ΅ μ¶”μ  κ°€λ¥ν•λ‹¤.
